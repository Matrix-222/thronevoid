<script src="i18n.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getAuth, 
            signInWithEmailAndPassword, 
            createUserWithEmailAndPassword,
            GoogleAuthProvider,
            signInWithPopup,
            sendPasswordResetEmail
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"; 

        // *** Ù…ÙØ§ØªÙŠØ­ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„ÙØ¹Ù„ÙŠ (thronevoid) ***
        const firebaseConfig = {
            apiKey: "AIzaSyB-bfHRJW3E8KW3-o-PkNW6xi5ytrTKMJE", 
            authDomain: "thronevoid.firebaseapp.com",
            projectId: "thronevoid",
            storageBucket: "thronevoid.firebasestorage.app",
            messagingSenderId: "958587822012",
            appId: "1:958587822012:web:312cf3d9e7c87e1c6415b9",
            measurementId: "G-N34T3VRGX0"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app); 
        
        // -------------------------------------------------------------
        //                 Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Firestore (Ù…Ø­Ø¯Ø«Ø©)
        // -------------------------------------------------------------
        async function createUserProfile(user) {
            const userDocRef = doc(db, "users", user.email);
            
            // ğŸ”¥ğŸ”¥ Ø¥Ø¶Ø§ÙØ© Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø¬Ø²Ø¡ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù‚Ø¨Ù„ @) ğŸ”¥ğŸ”¥
            const defaultUsername = user.email.split('@')[0];

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ù‚Ø§Ø· ÙˆØ·Ø§Ù‚Ø© ÙˆØ§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø§ÙØªØ±Ø§Ø¶ÙŠ
            await setDoc(userDocRef, {
                email: user.email,
                username: defaultUsername, // ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡
                highScore: 0,
                energy: 100,
                lastEnergyUpdate: new Date(),
                avatarUrl: user.photoURL || "https://via.placeholder.com/100/1e1e1e/ffffff?text=U",
                isBanned: false,
                isMuted: false,
                language: localStorage.getItem('lang') || 'ar'
            }, { merge: true });
        }
        
        // ... (Ø¨Ù‚ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ù€ login.html Ù„Ù… ÙŠØªØºÙŠØ±) ...
    </script>
</body>
</html>
